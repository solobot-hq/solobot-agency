(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},63676,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(37727),l=e.i(43531),r=e.i(39312),i=e.i(31278),n=e.i(88653),o=e.i(46932);e.s(["UpgradeModal",0,({isOpen:e,onClose:d})=>{let[c,x]=(0,s.useState)(!1),[h,m]=(0,s.useState)("monthly"),u="yearly"===h?"Save £78":null,p=async()=>{try{x(!0);let e="monthly"===h?"price_1Sfluc3ZAuu3KSSwAfVCBwzp":"price_1Sfm0K3ZAuu3KSSwcrpN2Fhw";if(!e){console.error("Price ID missing in environment variables"),x(!1);return}let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e})}),s=await t.json();s.url?window.location.href=s.url:(console.error("No checkout URL returned",s),x(!1))}catch(e){console.error("Checkout failed:",e),x(!1)}};return e?(0,t.jsx)(n.AnimatePresence,{children:(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:(0,t.jsxs)(o.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-md bg-[#0F172A] border border-indigo-500/30 rounded-2xl shadow-2xl overflow-hidden",children:[(0,t.jsx)("button",{type:"button",onClick:d,className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-white rounded-full hover:bg-white/10 transition-colors z-10",children:(0,t.jsx)(a.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"p-8 text-center bg-gradient-to-b from-indigo-900/20 to-transparent",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-indigo-500/20 rounded-full flex items-center justify-center border border-indigo-500/50 shadow-[0_0_30px_rgba(99,102,241,0.3)]",children:(0,t.jsx)(r.Zap,{className:"w-8 h-8 text-indigo-400"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Unlock Pro Power"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Remove limits and automate your entire workflow."})]}),(0,t.jsx)("div",{className:"px-8 flex justify-center mb-6",children:(0,t.jsxs)("div",{className:"flex bg-slate-800/50 p-1 rounded-lg border border-slate-700",children:[(0,t.jsx)("button",{type:"button",onClick:()=>m("monthly"),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${"monthly"===h?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:"Monthly"}),(0,t.jsxs)("button",{type:"button",onClick:()=>m("yearly"),className:`px-4 py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-2 ${"yearly"===h?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-200"}`,children:["Yearly",(0,t.jsx)("span",{className:"text-[9px] bg-emerald-500/20 text-emerald-400 px-1.5 py-0.5 rounded border border-emerald-500/20",children:"-17%"})]})]})}),(0,t.jsxs)("div",{className:"px-8 pb-8 space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3",children:["Unlimited AI Generations","Advanced Rewrite Modes","Full Version History & No Watermark","Priority Support"].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-300",children:[(0,t.jsx)("div",{className:"p-1 rounded-full bg-emerald-500/20 text-emerald-400",children:(0,t.jsx)(l.Check,{className:"w-3 h-3"})}),e]},s))}),(0,t.jsx)("button",{type:"button",onClick:p,disabled:c,className:"w-full mt-6 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-indigo-500/25 active:scale-95 flex flex-col items-center justify-center gap-1",children:c?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}),"Redirecting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"text-base",children:["Upgrade for £","monthly"===h?39:390," / ",h]}),u&&(0,t.jsxs)("span",{className:"text-[10px] font-normal opacity-90 text-indigo-200",children:["(Pay £390/yr • ",u,")"]})]})}),(0,t.jsx)("p",{className:"text-center text-[10px] text-slate-600 mt-4",children:"Secure payment via Stripe. Cancel anytime."})]})]})})}):null}])},37727,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),a=e.i(31178),l=e.i(47414),r=e.i(21476),i=s,n=e.i(37806);class o extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:s}){let a=(0,i.useId)(),l=(0,i.useRef)(null),r=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,i.useContext)(n.MotionConfigContext);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:i,left:n}=r.current;if(s||!l.current||!e||!t)return;l.current.dataset.motionPopId=a;let o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            top: ${i}px !important;
            left: ${n}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[s]),(0,t.jsx)(o,{isPresent:s,childRef:l,sizeRef:r,children:i.cloneElement(e,{ref:l})})}let c=({children:e,initial:a,isPresent:i,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:h})=>{let m=(0,l.useConstant)(x),u=(0,s.useId)(),p=(0,s.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;n&&n()},[m,n]),g=(0,s.useMemo)(()=>({id:u,initial:a,isPresent:i,custom:o,onExitComplete:p,register:e=>(m.set(e,!1),()=>m.delete(e))}),c?[Math.random(),p]:[i,p]);return(0,s.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[i]),s.useEffect(()=>{i||m.size||!n||n()},[i]),"popLayout"===h&&(e=(0,t.jsx)(d,{isPresent:i,children:e})),(0,t.jsx)(r.PresenceContext.Provider,{value:g,children:e})};function x(){return new Map}var h=e.i(64978);let m=e=>e.key||"";function u(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var p=e.i(74008);let g=({children:e,custom:r,initial:i=!0,onExitComplete:n,presenceAffectsLayout:o=!0,mode:d="sync",propagate:x=!1})=>{let[g,f]=(0,h.usePresence)(x),b=(0,s.useMemo)(()=>u(e),[e]),y=x&&!g?[]:b.map(m),v=(0,s.useRef)(!0),w=(0,s.useRef)(b),j=(0,l.useConstant)(()=>new Map),[N,k]=(0,s.useState)(b),[C,S]=(0,s.useState)(b);(0,p.useIsomorphicLayoutEffect)(()=>{v.current=!1,w.current=b;for(let e=0;e<C.length;e++){let t=m(C[e]);y.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[C,y.length,y.join("-")]);let P=[];if(b!==N){let e=[...b];for(let t=0;t<C.length;t++){let s=C[t],a=m(s);y.includes(a)||(e.splice(t,0,s),P.push(s))}"wait"===d&&P.length&&(e=P),S(u(e)),k(b);return}let{forceRender:M}=(0,s.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:C.map(e=>{let s=m(e),a=(!x||!!g)&&(b===C||y.includes(s));return(0,t.jsx)(c,{isPresent:a,initial:(!v.current||!!i)&&void 0,custom:a?void 0:r,presenceAffectsLayout:o,mode:d,onExitComplete:a?void 0:()=>{if(!j.has(s))return;j.set(s,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),S(w.current),x&&(null==f||f()),n&&n())},children:e},s)})})};e.s(["AnimatePresence",()=>g],88653)},87616,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(73264),r=e.i(7233),i=e.i(75254);let n=(0,i.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var o=e.i(63209),d=e.i(25652);let c=(0,i.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var x=e.i(31278),h=e.i(63488),m=e.i(70756);let u={lead:{label:"New Leads",baseProbability:10,color:"bg-blue-500"},contacted:{label:"Contacted",baseProbability:30,color:"bg-yellow-500"},negotiation:{label:"Negotiation",baseProbability:70,color:"bg-purple-500"},closed:{label:"Won / Lost",baseProbability:100,color:"bg-emerald-500"}},p=e=>{let t=new Date,s=new Date(e.lastActivity),a=Math.floor((t.getTime()-s.getTime())/864e5),l=u[e.stage].baseProbability;"closed"!==e.stage&&(l=Math.max(5,l-5*Math.floor(a/3))),0===a&&"closed"!==e.stage&&(l=Math.min(95,l+5));let r=a>7&&"closed"!==e.stage,i="No immediate action";return"lead"===e.stage?i=a>2?"Initiate Outreach":"Research Prospect":"contacted"===e.stage?i=r?"Re-engage / Breakup Email":"Schedule Discovery Call":"negotiation"===e.stage?i=r?"Identify Blockers":"Push for Closing":"closed"===e.stage&&(i="Archive / Onboard"),{...e,winProbability:l,isStalled:r,nextStepSuggestion:i}},g=["Acme Corp","Globex","Soylent Corp","Initech","Umbrella Corp","Stark Ind","Wayne Ent","Cyberdyne","Massive Dynamic","Hooli"];var f=e.i(63676);let b=({deal:e,onDragStart:s,onDraftEmail:a})=>{let l=Math.round(e.value*((e.winProbability||0)/100));return(0,t.jsxs)("div",{draggable:!0,onDragStart:t=>s(t,e.id),className:`group relative p-4 rounded-xl border border-slate-700/50 bg-[#1E293B] hover:border-indigo-500/50 transition-all hover:shadow-lg hover:shadow-indigo-500/10 cursor-grab active:cursor-grabbing ${e.isStalled?"border-l-2 border-l-red-500":""}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-slate-200 group-hover:text-indigo-400 transition-colors",children:e.companyName}),(0,t.jsx)("span",{className:"text-[10px] text-slate-500",children:e.contactName})]}),(0,t.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>a(e),className:"p-1.5 rounded-md hover:bg-slate-700 text-slate-400 hover:text-white",title:"Draft Outreach",children:(0,t.jsx)(h.Mail,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{className:"p-1.5 rounded-md hover:bg-slate-700 text-slate-400 hover:text-white",children:(0,t.jsx)(n,{className:"w-3.5 h-3.5"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-slate-300",children:["$",e.value.toLocaleString()]}),(0,t.jsxs)("span",{className:"text-[9px] text-slate-500",children:["~$",l.toLocaleString()," forecast"]})]}),"closed"!==e.stage&&(0,t.jsxs)("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded text-[9px] font-bold border ${e.winProbability>70?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":e.winProbability>40?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[(0,t.jsx)(d.TrendingUp,{className:"w-3 h-3"}),e.winProbability,"% Win"]})]}),(0,t.jsx)("div",{className:"pt-3 border-t border-slate-700/50 flex items-center gap-2",children:e.isStalled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.AlertCircle,{className:"w-3 h-3 text-red-400 shrink-0"}),(0,t.jsxs)("span",{className:"text-[10px] text-red-400 font-medium truncate",children:["Stalled: ",e.nextStepSuggestion]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c,{className:"w-3 h-3 text-slate-500 shrink-0"}),(0,t.jsxs)("span",{className:"text-[10px] text-slate-500 truncate",children:["Next: ",e.nextStepSuggestion]})]})})]})};function y(){let e=(0,a.useRouter)(),[i,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[c,h]=(0,s.useState)(null),[y,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(()=>{n(((e=12)=>Array.from({length:e}).map((e,t)=>{let s=Math.random(),a="lead";s>.4&&(a="contacted"),s>.7&&(a="negotiation"),s>.9&&(a="closed");let l=Math.floor(20*Math.random()),r=new Date;return r.setDate(r.getDate()-l),p({id:`deal-${t}`,companyName:g[t%g.length],contactName:`Contact ${t+1}`,contactEmail:`contact${t+1}@example.com`,value:(Math.floor(50*Math.random())+5)*1e3,stage:a,createdAt:new Date,lastActivity:r,source:Math.random()>.5?"leads_engine":"manual"})}))(2)),d(!1)},600);return()=>clearTimeout(e)},[]);let w=e=>i.filter(t=>t.stage===e),j=t=>{let s=new URLSearchParams({recipient:t.contactName,intent:`Follow up regarding ${t.companyName} deal`,points:`Current deal stage: ${t.stage}
Value: $${t.value}
Next step: ${t.nextStepSuggestion}`});e.push(`/dashboard/email-assistant?${s.toString()}`)},N=(e,t)=>{h(t),e.dataTransfer.effectAllowed="move"},k=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"};return o?(0,t.jsx)("div",{className:"h-full w-full bg-[#0B1120] flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(x.Loader2,{className:"w-8 h-8 text-indigo-500 animate-spin"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Loading Revenue Engine..."})]})}):(0,t.jsxs)("div",{className:"h-full w-full bg-[#0B1120] text-slate-200 font-sans flex flex-col overflow-hidden",children:[(0,t.jsx)(f.UpgradeModal,{isOpen:y,onClose:()=>v(!1)}),(0,t.jsxs)("header",{className:"flex justify-between items-center px-6 py-4 border-b border-zinc-800 bg-[#0B1120] shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-2 rounded-xl bg-[#1E293B] border border-slate-700/50 shadow-lg shadow-indigo-900/10",children:(0,t.jsx)(l.LayoutGrid,{className:"w-5 h-5 text-indigo-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-xl font-bold text-white tracking-tight flex items-center gap-2",children:["Pipeline Manager",(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-indigo-500/10 text-indigo-400 text-[10px] font-bold tracking-wide uppercase border border-indigo-500/20",children:"Revenue Engine"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-400 font-medium",children:"AI-powered deal tracking & forecasting"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-[10px] text-slate-500",children:[i.length," / ",3," Active Deals"]}),(0,t.jsxs)("button",{onClick:()=>{if(i.length>=3)return void v(!0);let e=p({id:`deal-new-${Date.now()}`,companyName:"New Prospect Inc.",contactName:"Alex Founder",contactEmail:"alex@newprospect.com",value:15e3,stage:"lead",createdAt:new Date,lastActivity:new Date,source:"manual"});n(t=>[e,...t])},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded-lg transition-all shadow-lg shadow-indigo-500/20 active:scale-95",children:[i.length>=3?(0,t.jsx)(m.Lock,{className:"w-3 h-3"}):(0,t.jsx)(r.Plus,{className:"w-3 h-3"}),"Add Deal"]})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-x-auto p-6",children:(0,t.jsx)("div",{className:"flex gap-6 h-full min-w-[1000px]",children:Object.keys(u).map(e=>(0,t.jsxs)("div",{className:`flex-1 flex flex-col min-w-[280px] rounded-xl transition-colors ${c?"bg-indigo-500/5 border-indigo-500/10 border-dashed border-2":""}`,onDragOver:k,onDrop:t=>{t.preventDefault(),c&&(n(t=>t.map(t=>t.id===c?p({...t,stage:e,lastActivity:new Date}):t)),h(null))},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4 px-1 pt-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${u[e].color}`}),(0,t.jsx)("h3",{className:"text-sm font-bold text-slate-300 uppercase tracking-wide",children:u[e].label}),(0,t.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-slate-800 text-slate-500 text-[10px] font-bold",children:w(e).length})]}),(0,t.jsx)("div",{className:"flex flex-col items-end",children:(0,t.jsxs)("span",{className:"text-[10px] font-bold text-slate-400",children:["$",i.filter(t=>t.stage===e).reduce((e,t)=>e+t.value,0).toLocaleString()]})})]}),(0,t.jsxs)("div",{className:"flex-1 rounded-xl space-y-3 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-700 pb-10",children:[w(e).map(e=>(0,t.jsx)(b,{deal:e,onDragStart:N,onDraftEmail:j},e.id)),0===w(e).length&&(0,t.jsx)("div",{className:"h-24 flex items-center justify-center border-2 border-dashed border-slate-800 rounded-lg mx-2",children:(0,t.jsx)("span",{className:"text-xs text-slate-600",children:"Drop here"})})]})]},e))})})]})}e.s(["default",()=>y],87616)}]);