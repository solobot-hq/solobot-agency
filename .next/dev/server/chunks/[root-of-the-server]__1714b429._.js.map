{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/api/bots/ai-sales-agent/linkedin/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport OpenAI from \"openai\";\r\n\r\nconst client = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const { targetAudience, productDetails, painPoints, tone } = body;\r\n\r\n    // Default tone fallback\r\n    const selectedTone = tone || \"Persuasive\";\r\n\r\n    const systemPrompt = `\r\n      You are a world-class LinkedIn Social Selling Strategist (Style: Justin Welsh meets Daniel Fazio).\r\n      Your goal is to generate \"Pattern Interrupt\" outreach assets.\r\n      \r\n      **CORE PHILOSOPHY:**\r\n      1. **No Fluff:** Remove \"I hope you are well\", \"My name is\", \"I'd love to pick your brain\".\r\n      2. **Structure:** Observation -> Tension (Pain) -> Micro-Benefit -> Curiosity Question.\r\n      3. **Tone Logic:**\r\n         - **Friendly:** Softer openers, more casual syntax.\r\n         - **Direct:** Short sentences, punchy, business-first.\r\n         - **Professional:** Polished grammar, respectful but equal status.\r\n         - **Persuasive:** High curiosity, benefit-led.\r\n\r\n      **OUTPUT REQUIREMENTS (JSON):**\r\n      Return a JSON object with exactly these keys:\r\n      {\r\n        \"connectionNotes\": [\"string\", \"string\", \"string\"], // Max 300 chars. 1. Curiosity, 2. Soft Ask, 3. Credibility.\r\n        \"followUpDMs\": [\"string\", \"string\", \"string\"], // Max 90 words. Contextual, value-add, no hard pitching.\r\n        \"voiceNoteScripts\": [\"string\", \"string\", \"string\"] // Natural speech script, pauses indicated by \"...\", casual openers.\r\n      }\r\n    `;\r\n\r\n    const userPrompt = `\r\n      **Prospect Profile:**\r\n      - **Audience:** ${targetAudience}\r\n      - **Pain:** ${painPoints}\r\n      - **Solution:** ${productDetails}\r\n      - **Selected Tone:** ${selectedTone}\r\n\r\n      Generate the LinkedIn assets now.\r\n    `;\r\n\r\n    const completion = await client.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        { role: \"system\", content: systemPrompt },\r\n        { role: \"user\", content: userPrompt }\r\n      ],\r\n      response_format: { type: \"json_object\" },\r\n      temperature: 0.7,\r\n    });\r\n\r\n    const content = completion.choices[0].message.content;\r\n    const parsed = JSON.parse(content || \"{}\");\r\n\r\n    // Formatter: Converts the structured JSON into a UI-friendly string \r\n    // This ensures your existing \"whitespace-pre-wrap\" UI displays it perfectly without code changes.\r\n    const formattedOutput = `\r\n### ðŸ¤ Connection Notes (Max 300 chars)\r\n${(parsed.connectionNotes || []).map((n: string) => `â€¢ ${n}`).join('\\n\\n')}\r\n\r\n### ðŸ“© DM Follow-Ups (Value First)\r\n${(parsed.followUpDMs || []).map((n: string) => `â€¢ ${n}`).join('\\n\\n')}\r\n\r\n### ðŸŽ™ï¸ Voice Note Scripts (Natural Speech)\r\n${(parsed.voiceNoteScripts || []).map((n: string) => `â€¢ \"${n}\"`).join('\\n\\n')}\r\n    `.trim();\r\n\r\n    return NextResponse.json({ result: formattedOutput });\r\n\r\n  } catch (error) {\r\n    console.error(\"LinkedIn API Error:\", error);\r\n    return NextResponse.json({ error: \"Failed to generate LinkedIn assets.\" }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEA,MAAM,SAAS,IAAI,mLAAM,CAAC;IAAE,QAAQ,QAAQ,GAAG,CAAC,cAAc;AAAC;AAExD,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,cAAc,EAAE,cAAc,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG;QAE7D,wBAAwB;QACxB,MAAM,eAAe,QAAQ;QAE7B,MAAM,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;IAoBtB,CAAC;QAED,MAAM,aAAa,CAAC;;sBAEF,EAAE,eAAe;kBACrB,EAAE,WAAW;sBACT,EAAE,eAAe;2BACZ,EAAE,aAAa;;;IAGtC,CAAC;QAED,MAAM,aAAa,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACtD,OAAO;YACP,UAAU;gBACR;oBAAE,MAAM;oBAAU,SAAS;gBAAa;gBACxC;oBAAE,MAAM;oBAAQ,SAAS;gBAAW;aACrC;YACD,iBAAiB;gBAAE,MAAM;YAAc;YACvC,aAAa;QACf;QAEA,MAAM,UAAU,WAAW,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO;QACrD,MAAM,SAAS,KAAK,KAAK,CAAC,WAAW;QAErC,qEAAqE;QACrE,kGAAkG;QAClG,MAAM,kBAAkB,CAAC;;AAE7B,EAAE,CAAC,OAAO,eAAe,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAc,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,QAAQ;;;AAG3E,EAAE,CAAC,OAAO,WAAW,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAc,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,QAAQ;;;AAGvE,EAAE,CAAC,OAAO,gBAAgB,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAc,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ;IAC1E,CAAC,CAAC,IAAI;QAEN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAgB;IAErD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAsC,GAAG;YAAE,QAAQ;QAAI;IAC3F;AACF"}}]
}