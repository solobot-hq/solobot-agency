{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/lib/stripe.ts"],"sourcesContent":["import Stripe from \"stripe\";\nexport const stripe = new Stripe(process.env.STRIPE_SECRET_KEY || \"\", { apiVersion: \"2023-10-16\" });\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,SAAS,IAAI,mKAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB,IAAI,IAAI;IAAE,YAAY;AAAa"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/api/test/subscription/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { currentUser } from \"@clerk/nextjs/server\";\r\nimport { stripe } from \"@/lib/stripe\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    const user = await currentUser();\r\n\r\n    if (!user) {\r\n      return NextResponse.json({\r\n        error: \"No user logged in\",\r\n      });\r\n    }\r\n\r\n    const email = user.emailAddresses[0].emailAddress;\r\n\r\n    // Find Stripe customer\r\n    const customers = await stripe.customers.list({\r\n      email,\r\n      limit: 1,\r\n    });\r\n\r\n    const customer = customers.data[0];\r\n\r\n    let subscriptions: any[] = [];\r\n\r\n    if (customer) {\r\n      const subs = await stripe.subscriptions.list({\r\n        customer: customer.id,\r\n        status: \"all\",\r\n        limit: 5,\r\n      });\r\n      subscriptions = subs.data;\r\n    }\r\n\r\n    return NextResponse.json({\r\n      clerkEmail: email,\r\n      stripeCustomerFound: !!customer,\r\n      stripeCustomerId: customer?.id || null,\r\n      stripeSubscriptions: subscriptions.map((s) => ({\r\n        id: s.id,\r\n        status: s.status,\r\n        price: s.items.data[0]?.price?.id,\r\n        nickname: s.items.data[0]?.price?.nickname,\r\n        currency: s.items.data[0]?.price?.currency,\r\n      })),\r\n    });\r\n  } catch (err: any) {\r\n    return NextResponse.json({\r\n      error: err.message,\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,2MAAW;QAE9B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;YACT;QACF;QAEA,MAAM,QAAQ,KAAK,cAAc,CAAC,EAAE,CAAC,YAAY;QAEjD,uBAAuB;QACvB,MAAM,YAAY,MAAM,yHAAM,CAAC,SAAS,CAAC,IAAI,CAAC;YAC5C;YACA,OAAO;QACT;QAEA,MAAM,WAAW,UAAU,IAAI,CAAC,EAAE;QAElC,IAAI,gBAAuB,EAAE;QAE7B,IAAI,UAAU;YACZ,MAAM,OAAO,MAAM,yHAAM,CAAC,aAAa,CAAC,IAAI,CAAC;gBAC3C,UAAU,SAAS,EAAE;gBACrB,QAAQ;gBACR,OAAO;YACT;YACA,gBAAgB,KAAK,IAAI;QAC3B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,YAAY;YACZ,qBAAqB,CAAC,CAAC;YACvB,kBAAkB,UAAU,MAAM;YAClC,qBAAqB,cAAc,GAAG,CAAC,CAAC,IAAM,CAAC;oBAC7C,IAAI,EAAE,EAAE;oBACR,QAAQ,EAAE,MAAM;oBAChB,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO;oBAC/B,UAAU,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO;oBAClC,UAAU,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO;gBACpC,CAAC;QACH;IACF,EAAE,OAAO,KAAU;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO,IAAI,OAAO;QACpB;IACF;AACF"}}]
}