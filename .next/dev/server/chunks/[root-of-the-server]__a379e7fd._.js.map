{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/api/workspace/switch/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { auth, clerkClient } from '@clerk/nextjs/server';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { userId } = auth();\r\n    const body = await req.json();\r\n    const { workspaceId } = body;\r\n\r\n    if (!userId) {\r\n      return new NextResponse(\"Unauthorized\", { status: 401 });\r\n    }\r\n\r\n    if (!workspaceId) {\r\n      return new NextResponse(\"Workspace ID required\", { status: 400 });\r\n    }\r\n\r\n    const client = await clerkClient();\r\n\r\n    // Update Clerk User Metadata to persist preference across sessions/devices\r\n    await client.users.updateUserMetadata(userId, {\r\n      publicMetadata: {\r\n        activeWorkspaceId: workspaceId\r\n      }\r\n    });\r\n\r\n    return NextResponse.json({ success: true, workspaceId });\r\n  } catch (error) {\r\n    console.error(\"[WORKSPACE_SWITCH_ERROR]\", error);\r\n    return new NextResponse(\"Internal Server Error\", { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;QACvB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,WAAW,EAAE,GAAG;QAExB,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,gJAAY,CAAC,gBAAgB;gBAAE,QAAQ;YAAI;QACxD;QAEA,IAAI,CAAC,aAAa;YAChB,OAAO,IAAI,gJAAY,CAAC,yBAAyB;gBAAE,QAAQ;YAAI;QACjE;QAEA,MAAM,SAAS,MAAM,IAAA,0LAAW;QAEhC,2EAA2E;QAC3E,MAAM,OAAO,KAAK,CAAC,kBAAkB,CAAC,QAAQ;YAC5C,gBAAgB;gBACd,mBAAmB;YACrB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAY;IACxD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}