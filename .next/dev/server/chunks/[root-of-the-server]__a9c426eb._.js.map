{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/api/pulse/list/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// GET — fetch list\r\nexport async function GET() {\r\n  try {\r\n    const { userId } = auth();\r\n    if (!userId) return new NextResponse(\"Unauthorized\", { status: 401 });\r\n\r\n    const events = await prisma.pulseEvent.findMany({\r\n      where: { userId },\r\n      orderBy: { createdAt: \"desc\" },\r\n      take: 50,\r\n    });\r\n\r\n    return NextResponse.json(events);\r\n  } catch (error) {\r\n    return new NextResponse(\"Internal Server Error\", { status: 500 });\r\n  }\r\n}\r\n\r\n// POST — create event (test/demo)\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { userId } = auth();\r\n    if (!userId) return new NextResponse(\"Unauthorized\", { status: 401 });\r\n\r\n    const body = await req.json();\r\n    const { title, message, type } = body;\r\n\r\n    const event = await prisma.pulseEvent.create({\r\n      data: {\r\n        userId,\r\n        title: title || \"System Alert\",\r\n        message: message || \"Background event triggered.\",\r\n        type: type || \"SYSTEM\",\r\n      },\r\n    });\r\n\r\n    return NextResponse.json(event);\r\n  } catch (error) {\r\n    return new NextResponse(\"Internal Server Error\", { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;;;AAGA,MAAM,SAAS,IAAI;AAGZ,eAAe;IACpB,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;QACvB,IAAI,CAAC,QAAQ,OAAO,IAAI,gJAAY,CAAC,gBAAgB;YAAE,QAAQ;QAAI;QAEnE,MAAM,SAAS,MAAM,OAAO,UAAU,CAAC,QAAQ,CAAC;YAC9C,OAAO;gBAAE;YAAO;YAChB,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF;AAGO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;QACvB,IAAI,CAAC,QAAQ,OAAO,IAAI,gJAAY,CAAC,gBAAgB;YAAE,QAAQ;QAAI;QAEnE,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG;QAEjC,MAAM,QAAQ,MAAM,OAAO,UAAU,CAAC,MAAM,CAAC;YAC3C,MAAM;gBACJ;gBACA,OAAO,SAAS;gBAChB,SAAS,WAAW;gBACpB,MAAM,QAAQ;YAChB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}