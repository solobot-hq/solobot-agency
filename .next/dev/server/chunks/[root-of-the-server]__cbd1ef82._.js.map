{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/api/inbox/send/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { auth } from '@clerk/nextjs/server';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { userId } = auth();\r\n    if (!userId) {\r\n      return new NextResponse(\"Unauthorized\", { status: 401 });\r\n    }\r\n\r\n    const { sender, subject, body } = await req.json();\r\n\r\n    if (!subject || !body) {\r\n        return new NextResponse(\"Missing fields\", { status: 400 });\r\n    }\r\n\r\n    const message = await prisma.inboxMessage.create({\r\n      data: {\r\n        userId,\r\n        sender: sender || \"System Notification\",\r\n        subject,\r\n        body,\r\n        isRead: false,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json(message);\r\n  } catch (error) {\r\n    console.error(\"[INBOX_SEND_ERROR]\", error);\r\n    return new NextResponse(\"Internal Server Error\", { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;QACvB,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,gJAAY,CAAC,gBAAgB;gBAAE,QAAQ;YAAI;QACxD;QAEA,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAEhD,IAAI,CAAC,WAAW,CAAC,MAAM;YACnB,OAAO,IAAI,gJAAY,CAAC,kBAAkB;gBAAE,QAAQ;YAAI;QAC5D;QAEA,MAAM,UAAU,MAAM,OAAO,YAAY,CAAC,MAAM,CAAC;YAC/C,MAAM;gBACJ;gBACA,QAAQ,UAAU;gBAClB;gBACA;gBACA,QAAQ;YACV;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}