{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/api/inbox/list/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { auth } from '@clerk/nextjs/server';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function GET() {\r\n  try {\r\n    const { userId } = auth();\r\n    if (!userId) {\r\n      return new NextResponse(\"Unauthorized\", { status: 401 });\r\n    }\r\n\r\n    const messages = await prisma.inboxMessage.findMany({\r\n      where: { userId },\r\n      orderBy: { createdAt: 'desc' },\r\n      take: 50,\r\n    });\r\n\r\n    return NextResponse.json(messages);\r\n  } catch (error) {\r\n    console.error(\"[INBOX_LIST_ERROR]\", error);\r\n    // Return empty array instead of 500 to prevent UI crash on fresh db\r\n    return NextResponse.json([]); \r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe;IACpB,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;QACvB,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,gJAAY,CAAC,gBAAgB;gBAAE,QAAQ;YAAI;QACxD;QAEA,MAAM,WAAW,MAAM,OAAO,YAAY,CAAC,QAAQ,CAAC;YAClD,OAAO;gBAAE;YAAO;YAChB,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,oEAAoE;QACpE,OAAO,gJAAY,CAAC,IAAI,CAAC,EAAE;IAC7B;AACF"}}]
}