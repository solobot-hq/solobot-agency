{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/lib/plans.ts"],"sourcesContent":["export type Plan = \"free\" | \"pro\" | \"pro_max\";\r\n\r\nexport const PLAN_LIMITS = {\r\n  free: {\r\n    draftsPerDay: 3,\r\n    rewriteModes: false,\r\n    versions: false, // Access to history/versions\r\n    watermark: true,\r\n  },\r\n  pro: {\r\n    draftsPerDay: Infinity,\r\n    rewriteModes: true,\r\n    versions: true,\r\n    watermark: false,\r\n  },\r\n  pro_max: {\r\n    draftsPerDay: Infinity,\r\n    rewriteModes: true,\r\n    versions: true,\r\n    watermark: false,\r\n  },\r\n};\r\n\r\nexport const HARD_CAPS = {\r\n  free: {\r\n    draftsPerDay: 3,\r\n  },\r\n  pro: {\r\n    draftsPerDay: 50,\r\n  },\r\n  pro_max: {\r\n    draftsPerDay: 150,\r\n  },\r\n};"],"names":[],"mappings":";;;;;;AAEO,MAAM,cAAc;IACzB,MAAM;QACJ,cAAc;QACd,cAAc;QACd,UAAU;QACV,WAAW;IACb;IACA,KAAK;QACH,cAAc;QACd,cAAc;QACd,UAAU;QACV,WAAW;IACb;IACA,SAAS;QACP,cAAc;QACd,cAAc;QACd,UAAU;QACV,WAAW;IACb;AACF;AAEO,MAAM,YAAY;IACvB,MAAM;QACJ,cAAc;IAChB;IACA,KAAK;QACH,cAAc;IAChB;IACA,SAAS;QACP,cAAc;IAChB;AACF"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/components/UpgradeModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { X, Check, Zap, Loader2 } from \"lucide-react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\n\r\ninterface UpgradeModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const UpgradeModal = ({ isOpen, onClose }: UpgradeModalProps) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [billingCycle, setBillingCycle] = useState<'monthly' | 'yearly'>('monthly');\r\n\r\n  // Pricing Logic (Visuals)\r\n  const price = billingCycle === 'monthly' ? 39 : 390;\r\n  const savings = billingCycle === 'yearly' ? \"Save ¬£78\" : null;\r\n\r\n  const handleUpgrade = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Select the correct ID based on the toggle\r\n      // Ensure these start with NEXT_PUBLIC_ in your .env.local file\r\n      const priceId = billingCycle === 'monthly' \r\n        ? process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_MONTHLY \r\n        : process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_YEARLY;\r\n\r\n      if (!priceId) {\r\n        console.error(\"Price ID missing in environment variables\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(\"/api/checkout\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ priceId }), // Send the specific ID\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.url) {\r\n        // Redirect to Stripe Checkout\r\n        window.location.href = data.url;\r\n      } else {\r\n        console.error(\"No checkout URL returned\", data);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Checkout failed:\", error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm\">\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.95 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          exit={{ opacity: 0, scale: 0.95 }}\r\n          className=\"relative w-full max-w-md bg-[#0F172A] border border-indigo-500/30 rounded-2xl shadow-2xl overflow-hidden\"\r\n        >\r\n          {/* Close Button */}\r\n          <button \r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"absolute top-4 right-4 p-2 text-slate-400 hover:text-white rounded-full hover:bg-white/10 transition-colors z-10\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Header */}\r\n          <div className=\"p-8 text-center bg-gradient-to-b from-indigo-900/20 to-transparent\">\r\n            <div className=\"w-16 h-16 mx-auto mb-6 bg-indigo-500/20 rounded-full flex items-center justify-center border border-indigo-500/50 shadow-[0_0_30px_rgba(99,102,241,0.3)]\">\r\n              <Zap className=\"w-8 h-8 text-indigo-400\" />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-white mb-2\">Unlock Pro Power</h2>\r\n            <p className=\"text-slate-400 text-sm\">Remove limits and automate your entire workflow.</p>\r\n          </div>\r\n\r\n          {/* Billing Toggle */}\r\n          <div className=\"px-8 flex justify-center mb-6\">\r\n            <div className=\"flex bg-slate-800/50 p-1 rounded-lg border border-slate-700\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setBillingCycle('monthly')}\r\n                className={`px-4 py-1.5 text-xs font-bold rounded-md transition-all ${\r\n                  billingCycle === 'monthly' \r\n                    ? 'bg-indigo-600 text-white shadow-lg' \r\n                    : 'text-slate-400 hover:text-slate-200'\r\n                }`}\r\n              >\r\n                Monthly\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setBillingCycle('yearly')}\r\n                className={`px-4 py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-2 ${\r\n                  billingCycle === 'yearly' \r\n                    ? 'bg-indigo-600 text-white shadow-lg' \r\n                    : 'text-slate-400 hover:text-slate-200'\r\n                }`}\r\n              >\r\n                Yearly\r\n                <span className=\"text-[9px] bg-emerald-500/20 text-emerald-400 px-1.5 py-0.5 rounded border border-emerald-500/20\">\r\n                  -17%\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Benefits */}\r\n          <div className=\"px-8 pb-8 space-y-4\">\r\n            <div className=\"space-y-3\">\r\n              {[\r\n                \"Unlimited AI Generations\",\r\n                \"Advanced Rewrite Modes\",\r\n                \"Full Version History & No Watermark\",\r\n                \"Priority Support\"\r\n              ].map((benefit, i) => (\r\n                <div key={i} className=\"flex items-center gap-3 text-sm text-slate-300\">\r\n                  <div className=\"p-1 rounded-full bg-emerald-500/20 text-emerald-400\">\r\n                    <Check className=\"w-3 h-3\" />\r\n                  </div>\r\n                  {benefit}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Action Button - FIXED WITH TYPE=\"BUTTON\" */}\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleUpgrade}\r\n              disabled={loading}\r\n              className=\"w-full mt-6 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-indigo-500/25 active:scale-95 flex flex-col items-center justify-center gap-1\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                  Redirecting...\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <span className=\"text-base\">Upgrade for ¬£{price} / {billingCycle}</span>\r\n                  {savings && (\r\n                    <span className=\"text-[10px] font-normal opacity-90 text-indigo-200\">\r\n                      (Pay ¬£390/yr ‚Ä¢ {savings})\r\n                    </span>\r\n                  )}\r\n                </>\r\n              )}\r\n            </button>\r\n            \r\n            <p className=\"text-center text-[10px] text-slate-600 mt-4\">\r\n              Secure payment via Stripe. Cancel anytime.\r\n            </p>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </AnimatePresence>\r\n  );\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bolad/Downloads/SoloBotAgency_SaaS_Starter/app/dashboard/email-assistant/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  Bot,\r\n  Sparkles,\r\n  Loader2,\r\n  Copy,\r\n  Check,\r\n  PenTool,\r\n  RotateCcw,\r\n  History,\r\n  ChevronDown,\r\n  Wand2,\r\n  Briefcase,\r\n  Coffee,\r\n  Zap,\r\n  Heart,\r\n  Feather,\r\n  Sliders,\r\n  X,\r\n  Trash2,\r\n  ThumbsUp,\r\n  ShieldCheck,\r\n  Minimize2,\r\n  Maximize2,\r\n  Lock \r\n} from \"lucide-react\";\r\nimport { PLAN_LIMITS, HARD_CAPS, Plan } from \"@/lib/plans\";\r\nimport { UpgradeModal } from \"@/components/UpgradeModal\";\r\n\r\n// --- Types ---\r\n\r\ninterface EmailState {\r\n  recipient: string;\r\n  subject: string;\r\n  keyPoints: string;\r\n  tone: string;\r\n  style: string;\r\n  length: string;\r\n  options: {\r\n    includeCTA: boolean;\r\n    addUrgency: boolean;\r\n    humanize: boolean;\r\n    formal: boolean;\r\n    simplify: boolean;\r\n    addWarmth: boolean;\r\n  };\r\n}\r\n\r\ninterface DraftVersion {\r\n  id: string;\r\n  content: string;\r\n  timestamp: Date;\r\n  label: string;\r\n  confidence: number;\r\n  type: 'Original' | 'Rewrite';\r\n}\r\n\r\ninterface SelectOption {\r\n  label: string;\r\n  value: string;\r\n  icon: string;\r\n  description: string;\r\n}\r\n\r\n// --- Configuration Constants ---\r\n\r\nconst TONES = [\r\n  { id: \"Professional\", icon: Briefcase, color: \"text-[#00C26D]\", bg: \"bg-[#00C26D]/10\", border: \"border-[#00C26D]/20\", label: \"Reliable\" },\r\n  { id: \"Casual\", icon: Coffee, color: \"text-[#00C26D]\", bg: \"bg-[#00C26D]/10\", border: \"border-[#00C26D]/20\", label: \"Relaxed\" },\r\n  { id: \"Urgent\", icon: Zap, color: \"text-[#00C26D]\", bg: \"bg-[#00C26D]/10\", border: \"border-[#00C26D]/20\", label: \"Fast Action\" },\r\n  { id: \"Empathetic\", icon: Heart, color: \"text-[#00C26D]\", bg: \"bg-[#00C26D]/10\", border: \"border-[#00C26D]/20\", label: \"Understanding\" },\r\n];\r\n\r\nconst VOICE_OPTIONS: SelectOption[] = [\r\n  { label: \"Direct\", value: \"Direct\", icon: \"‚ö°\", description: \"Clear, zero fluff\" },\r\n  { label: \"Balanced\", value: \"Balanced\", icon: \"‚öñÔ∏è\", description: \"Neutral & safe\" },\r\n  { label: \"Friendly\", value: \"Friendly\", icon: \"üòä\", description: \"Warm approach\" },\r\n  { label: \"Bold\", value: \"Bold\", icon: \"üî•\", description: \"Confident authority\" },\r\n  { label: \"Soft\", value: \"Soft\", icon: \"üåô\", description: \"Low pressure\" },\r\n  { label: \"Executive\", value: \"Executive\", icon: \"üßä\", description: \"C-Level brevity\" }\r\n];\r\n\r\nconst LENGTH_OPTIONS: SelectOption[] = [\r\n  { label: \"Very Short\", value: \"Very Short\", icon: \"‚úÇÔ∏è\", description: \"Tweet length\" },\r\n  { label: \"Short\", value: \"Short\", icon: \"ü™∂\", description: \"Quick read\" },\r\n  { label: \"Medium\", value: \"Medium\", icon: \"üìÑ\", description: \"Standard draft\" },\r\n  { label: \"Long\", value: \"Long\", icon: \"üìú\", description: \"Detailed logic\" },\r\n  { label: \"Expanded\", value: \"Expanded\", icon: \"üöÄ\", description: \"Full context\" }\r\n];\r\n\r\n// --- EXECUTIVE INTELLIGENCE ENGINE ---\r\n\r\nconst getDeterministic = <T,>(arr: T[], seed: string): T => {\r\n  let hash = 0;\r\n  for (let i = 0; i < seed.length; i++) {\r\n    hash = ((hash << 5) - hash) + seed.charCodeAt(i);\r\n    hash |= 0;\r\n  }\r\n  return arr[Math.abs(hash) % arr.length];\r\n};\r\n\r\nconst formatUserPoints = (text: string): string[] => {\r\n  if (!text) return [\"the items we discussed\"];\r\n  if (text.includes('\\n')) {\r\n    return text.split('\\n').filter(line => line.trim().length > 0).map(l => l.replace(/^[‚Ä¢\\-\\*]\\s*/, '').trim());\r\n  }\r\n  if (text.includes(',') && text.length > 50) {\r\n    return text.split(',').filter(line => line.trim().length > 0).map(l => l.trim());\r\n  }\r\n  return [text.trim()];\r\n};\r\n\r\n// Executive Bullet Enhancer\r\nconst enhanceBullet = (line: string): string => {\r\n  const l = line.toLowerCase();\r\n  \r\n  if (l.includes(\"risk\") || l.includes(\"issue\") || l.includes(\"blocker\") || l.includes(\"mitigation\")) \r\n    return `${line} to mitigate downstream impact`;\r\n\r\n  if (l.includes(\"budget\") || l.includes(\"cost\") || l.includes(\"price\") || l.includes(\"finance\") || l.includes(\"spend\")) \r\n    return `${line} to ensure fiscal alignment`;\r\n\r\n  if (l.includes(\"timeline\") || l.includes(\"schedule\") || l.includes(\"date\") || l.includes(\"deadline\") || l.includes(\"roadmap\")) \r\n    return `${line} to manage delivery expectations`;\r\n  \r\n  if (l.includes(\"milestone\") || l.includes(\"goal\") || l.includes(\"target\")) \r\n    return `${line} to lock scope and sequencing`;\r\n\r\n  if (l.includes(\"update\") || l.includes(\"status\") || l.includes(\"progress\")) \r\n    return `${line} to maintain stakeholder visibility`;\r\n\r\n  if (l.includes(\"review\") || l.includes(\"approve\") || l.includes(\"sign\")) \r\n    return `${line} to unblock critical dependencies`;\r\n\r\n  return line;\r\n};\r\n\r\nconst applyTextTransforms = (text: string, options: { formal?: boolean; simplify?: boolean; humanize?: boolean; urgency?: boolean }, tone: string) => {\r\n  let processed = text;\r\n\r\n  const bannedPhrases = [\r\n    \"Reflecting on\", \"Simply put\", \"Ideally,\", \"Here is a simple summary\", \r\n    \"I hope this finds you well\", \"Trust you are doing well\", \"correspondence\",\r\n    \"regarding the points\", \"items we discussed\", \"I wanted to provide\",\r\n    \"I have outlined\", \"Below are\", \"The following items\"\r\n  ];\r\n  \r\n  bannedPhrases.forEach(phrase => {\r\n    const regex = new RegExp(phrase + \",?\", \"gi\");\r\n    processed = processed.replace(regex, \"\");\r\n  });\r\n\r\n  if (options.formal) {\r\n    const formalMap: Record<string, string> = {\r\n      \"I'm\": \"I am\", \"can't\": \"cannot\", \"won't\": \"will not\", \"let's\": \"let us\",\r\n      \"checking in\": \"writing\", \"thanks\": \"thank you\", \"need\": \"require\",\r\n      \"talk\": \"discuss\", \"get\": \"receive\", \"quick\": \"brief\", \"just\": \"\"\r\n    };\r\n    Object.keys(formalMap).forEach(key => {\r\n      const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\r\n      processed = processed.replace(regex, formalMap[key]);\r\n    });\r\n  }\r\n\r\n  if (options.humanize && !options.formal && tone !== \"Professional\") {\r\n    if (processed.startsWith(\"I am\")) processed = processed.replace(\"I am\", \"I'm\");\r\n  }\r\n\r\n  return processed.replace(/\\s\\./g, \".\").replace(/\\.\\./g, \".\").trim();\r\n};\r\n\r\nconst generateSmartSubject = (baseSubject: string, mode: string, urgency: boolean, seed: string): string => {\r\n  const cleanBase = (baseSubject || \"Update\").replace(/^[:\\-\\s]+/, \"\");\r\n  \r\n  const strategies = {\r\n    Original: [`Re: ${cleanBase}`, `${cleanBase} - Next steps`, `Discussion: ${cleanBase}`],\r\n    Shorten: [`${cleanBase}`, `Quick q: ${cleanBase}`, `Re: ${cleanBase}`],\r\n    Expand: [`Context: ${cleanBase}`, `Overview: ${cleanBase}`, `Strategy: ${cleanBase}`],\r\n    Formal: [`Inquiry: ${cleanBase}`, `Update: ${cleanBase}`, `Regarding ${cleanBase}`],\r\n    Punchy: [`${cleanBase}?`, `Next steps: ${cleanBase}`, `Idea for ${cleanBase}`]\r\n  };\r\n\r\n  const pool = strategies[mode as keyof typeof strategies] || strategies.Original;\r\n  let selected = getDeterministic(pool, seed);\r\n\r\n  if (urgency) {\r\n    const urgentPrefixes = [\"Urgent: \", \"Time Sensitive: \", \"Action Required: \"];\r\n    selected = `${getDeterministic(urgentPrefixes, seed)}${selected}`;\r\n  }\r\n\r\n  return `Subject: ${selected}`;\r\n};\r\n\r\nconst generateOpener = (recipient: string, tone: string, warmth: boolean, humanize: boolean, mode: string, hasList: boolean, seed: string): string => {\r\n  const name = recipient ? recipient.split(\" \")[0] : \"there\";\r\n  \r\n  if (mode === \"Expand\" && tone === \"Professional\" && hasList) {\r\n    const executiveOpeners = [\r\n      `To ensure execution clarity and alignment on our strategic objectives:`,\r\n      `To keep delivery tracks moving and ensure stakeholder alignment:`,\r\n      `In order to maintain momentum and lock in our next milestones:`\r\n    ];\r\n    return `${name},\\n\\n${getDeterministic(executiveOpeners, seed)}`;\r\n  }\r\n\r\n  if (mode === \"Formal\") return `${name},`;\r\n  if (mode === \"Shorten\" || mode === \"Punchy\") return `${name},`;\r\n\r\n  const salutations: Record<string, string[]> = {\r\n    Professional: [`Dear ${name},`, `Hi ${name},`, `Hello ${name},`],\r\n    Casual: [`Hey ${name},`, `${name} ‚Äî`, `Hi ${name},`],\r\n    Urgent: [`${name},`, `Hi ${name},`],\r\n    Empathetic: [`Hi ${name},`, `Dear ${name},`]\r\n  };\r\n\r\n  let opener = getDeterministic(salutations[tone] || salutations.Professional, seed);\r\n\r\n  const bridges = [\r\n    \"Hope you're having a productive week.\",\r\n    \"Great connecting with you recently.\",\r\n    \"I wanted to circle back on our last conversation.\"\r\n  ];\r\n\r\n  if ((warmth || humanize) && tone !== \"Formal\") {\r\n    opener += `\\n\\n${getDeterministic(bridges, seed)}`;\r\n  }\r\n\r\n  return opener;\r\n};\r\n\r\nconst generateBodyContent = (points: string, mode: string, options: EmailState['options'], tone: string): string => {\r\n  const listItems = formatUserPoints(points);\r\n  const isList = listItems.length > 1;\r\n  const seed = points + mode + tone;\r\n  \r\n  let content = \"\";\r\n\r\n  if (isList) {\r\n    const shouldEnhance = (mode === \"Expand\" || (mode === \"Original\" && tone === \"Professional\"));\r\n    const processedItems = shouldEnhance ? listItems.map(enhanceBullet) : listItems;\r\n    const bulletString = processedItems.map(i => `‚Ä¢ ${i}`).join('\\n');\r\n    \r\n    switch (mode) {\r\n        case \"Shorten\":\r\n            content = `Quick check-in on these items:\\n\\n${bulletString}`;\r\n            break;\r\n        case \"Expand\":\r\n            if (tone === \"Professional\") {\r\n                 const decisiveClosings = [\r\n                   \"Alignment on these items allows us to proceed decisively.\",\r\n                   \"Clarity here prevents downstream rework.\",\r\n                   \"This baseline enables execution without delay.\"\r\n                 ];\r\n                 content = `${bulletString}\\n\\n${getDeterministic(decisiveClosings, seed)}`;\r\n            } else {\r\n                 content = `I wanted to provide some additional context on the following points:\\n\\n${bulletString}\\n\\nClarity on these items is essential for our next steps.`;\r\n            }\r\n            break;\r\n        case \"Formal\":\r\n            content = `Please review the following items at your earliest convenience:\\n\\n${bulletString}`;\r\n            break;\r\n        case \"Punchy\":\r\n            content = `Updates:\\n\\n${listItems.map(i => `> ${i}`).join('\\n')}\\n\\nReady to move?`;\r\n            break;\r\n        default:\r\n            content = `I wanted to touch base regarding:\\n\\n${bulletString}`;\r\n            break;\r\n    }\r\n  } else {\r\n    const rawPoints = points || \"our previous discussion\";\r\n    switch (mode) {\r\n        case \"Shorten\":\r\n            content = `Checking in on ${rawPoints}.`;\r\n            break;\r\n        case \"Expand\":\r\n            content = `I'm writing to provide an update regarding ${rawPoints}. I believe this is a key opportunity for us to align.`;\r\n            break;\r\n        case \"Formal\":\r\n            content = `I am writing to formally discuss ${rawPoints}.`;\r\n            break;\r\n        case \"Punchy\":\r\n            content = `Quick update on ${rawPoints}.`;\r\n            break;\r\n        default:\r\n            content = `Regarding ${rawPoints}, I wanted to ensure this is on your radar.`;\r\n            break;\r\n    }\r\n  }\r\n\r\n  return applyTextTransforms(content, options, tone);\r\n};\r\n\r\nconst generateClosing = (mode: string, tone: string, options: EmailState['options'], seed: string): string => {\r\n  let ctaSentence = \"\";\r\n  if (options.includeCTA) {\r\n    const ctas = {\r\n      Low: [\"Let me know your thoughts.\", \"Thoughts?\", \"Open to your feedback.\"],\r\n      Medium: [\"When are you free for a sync?\", \"Can we schedule 10 mins?\", \"Does Tuesday work?\"],\r\n      High: [\"Please confirm by EOD.\", \"I need a decision on this.\", \"Let's lock this in.\"]\r\n    };\r\n    let intensity: \"Low\" | \"Medium\" | \"High\" = \"Medium\";\r\n    if (options.addUrgency || mode === \"Punchy\") intensity = \"High\";\r\n    if (tone === \"Empathetic\" || options.addWarmth) intensity = \"Low\";\r\n    ctaSentence = getDeterministic(ctas[intensity], seed);\r\n  }\r\n\r\n  const signOffs: Record<string, string[]> = {\r\n    Professional: [\"Best regards,\", \"Sincerely,\", \"Regards,\"],\r\n    Casual: [\"Best,\", \"Cheers,\", \"Talk soon,\"],\r\n    Urgent: [\"Thanks,\", \"Best,\", \"-\"],\r\n    Empathetic: [\"Warmly,\", \"Kind regards,\", \"With appreciation,\"]\r\n  };\r\n\r\n  let effectiveTone = tone;\r\n  if (mode === \"Formal\") effectiveTone = \"Professional\";\r\n  if (mode === \"Punchy\") effectiveTone = \"Casual\";\r\n\r\n  const signOff = getDeterministic(signOffs[effectiveTone] || signOffs.Professional, seed);\r\n  const spacing = (mode === \"Shorten\" || mode === \"Punchy\") ? \"\\n\\n\" : \"\\n\\n\";\r\n  \r\n  return ctaSentence \r\n    ? `${spacing}${ctaSentence}\\n\\n${signOff}\\n[Your Name]` \r\n    : `${spacing}${signOff}\\n[Your Name]`;\r\n};\r\n\r\nconst generateSmartEmail = (data: EmailState, mode: string = 'Original', plan: Plan): string => {\r\n  const seed = data.keyPoints + mode + data.tone;\r\n  const listCheck = formatUserPoints(data.keyPoints).length > 1;\r\n\r\n  const subject = generateSmartSubject(data.subject, mode, data.options.addUrgency, seed);\r\n  const opener = generateOpener(data.recipient, data.tone, data.options.addWarmth, data.options.humanize, mode, listCheck, seed);\r\n  const body = generateBodyContent(data.keyPoints, mode, data.options, data.tone);\r\n  const closing = generateClosing(mode, data.tone, data.options, seed);\r\n\r\n  let fullEmail = `${subject}\\n\\n${opener}${(mode === \"Shorten\" || mode === \"Punchy\") ? \"\\n\\n\" : \"\\n\\n\"}${body}${closing}`;\r\n\r\n  if (PLAN_LIMITS[plan].watermark) {\r\n    fullEmail += `\\n\\n‚Äî\\nGenerated with SoloBot Email Assistant`;\r\n  }\r\n\r\n  return fullEmail;\r\n};\r\n\r\n// --- Utilities ---\r\n\r\nfunction extractSubjectAndBody(content: string) {\r\n  const subjectMatch = content.match(/Subject: (.*?)(\\n|$)/);\r\n  const subject = subjectMatch ? subjectMatch[1].trim() : \"\";\r\n  const body = content.replace(/Subject: .*?(\\n|$)/, \"\").trim();\r\n  return { subject, body };\r\n}\r\n\r\n// --- Main Component ---\r\n\r\nexport default function EmailAssistantPage() {\r\n  // --- PLAN SETTING (DEVELOPER MODE) ---\r\n  // Change this to 'free' to test limits, 'pro_max' to develop without limits.\r\n  const [userPlan] = useState<Plan>('pro_max'); \r\n  \r\n  const [dailyUsage, setDailyUsage] = useState(0);\r\n  const [isUpgradeOpen, setIsUpgradeOpen] = useState(false);\r\n\r\n  const [formData, setFormData] = useState<EmailState>({\r\n    recipient: \"\",\r\n    subject: \"\",\r\n    keyPoints: \"\",\r\n    tone: \"Professional\",\r\n    style: \"Direct\",\r\n    length: \"Medium\",\r\n    options: {\r\n      includeCTA: false,\r\n      addUrgency: false,\r\n      humanize: true,\r\n      formal: false,\r\n      simplify: false,\r\n      addWarmth: false,\r\n    },\r\n  });\r\n\r\n  const [versions, setVersions] = useState<DraftVersion[]>([]);\r\n  const [activeVersionIdx, setActiveVersionIdx] = useState<number>(-1);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [copied, setCopied] = useState(false);\r\n  const [historyList, setHistoryList] = useState<DraftVersion[]>([]);\r\n  const [isRefinementsOpen, setIsRefinementsOpen] = useState(false);\r\n  const [activeRewriteTool, setActiveRewriteTool] = useState<string | null>(null);\r\n\r\n  const handleInputChange = (field: keyof EmailState, value: any) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleOptionToggle = (key: keyof typeof formData.options) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      options: { ...prev.options, [key]: !prev.options[key] },\r\n    }));\r\n  };\r\n\r\n  const guardUsage = () => {\r\n    const effectiveLimit = Math.min(\r\n      PLAN_LIMITS[userPlan].draftsPerDay,\r\n      HARD_CAPS[userPlan].draftsPerDay\r\n    );\r\n    if (dailyUsage >= effectiveLimit) {\r\n      setIsUpgradeOpen(true);\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleGenerate = () => {\r\n    if (!guardUsage()) return;\r\n\r\n    setActiveRewriteTool(null);\r\n    setCopied(false);\r\n    \r\n    const variationSeed = crypto.randomUUID();\r\n    const content = generateSmartEmail(formData, 'Original', userPlan);\r\n    \r\n    const newVersion: DraftVersion = {\r\n      id: variationSeed,\r\n      content: content,\r\n      timestamp: new Date(),\r\n      label: `Draft ${versions.length + 1}`,\r\n      confidence: 94,\r\n      type: 'Original'\r\n    };\r\n    \r\n    const updatedVersions = [...versions, newVersion];\r\n    setVersions(updatedVersions);\r\n    setActiveVersionIdx(updatedVersions.length - 1);\r\n    setHistoryList(prev => [newVersion, ...prev]);\r\n    \r\n    setDailyUsage(prev => prev + 1);\r\n  };\r\n\r\n  const handleRewrite = (label: string) => {\r\n    if (activeVersionIdx === -1) return;\r\n    if (!PLAN_LIMITS[userPlan].rewriteModes) {\r\n      setIsUpgradeOpen(true);\r\n      return;\r\n    }\r\n    if (!guardUsage()) return;\r\n\r\n    setCopied(false);\r\n    setActiveRewriteTool(label);\r\n\r\n    const variationSeed = crypto.randomUUID();\r\n    const cleanRewrite = generateSmartEmail(formData, label, userPlan);\r\n\r\n    const newVersion: DraftVersion = {\r\n      id: variationSeed,\r\n      content: cleanRewrite,\r\n      timestamp: new Date(),\r\n      label: label,\r\n      confidence: 98,\r\n      type: 'Rewrite'\r\n    };\r\n    \r\n    const updatedVersions = [...versions, newVersion];\r\n    setVersions(updatedVersions);\r\n    setActiveVersionIdx(updatedVersions.length - 1);\r\n    setHistoryList(prev => [newVersion, ...prev]);\r\n\r\n    setDailyUsage(prev => prev + 1);\r\n  };\r\n\r\n  const handleHistorySelect = (item: DraftVersion) => {\r\n    if (!PLAN_LIMITS[userPlan].versions && item.type !== 'Original') {\r\n       setIsUpgradeOpen(true);\r\n       return; \r\n    }\r\n    const existingIndex = versions.findIndex(v => v.id === item.id);\r\n    if (existingIndex !== -1) {\r\n      setActiveVersionIdx(existingIndex);\r\n    }\r\n  };\r\n\r\n  const copyText = async (text: string) => {\r\n    if (!text) return;\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      setCopied(true);\r\n    } catch (err) {\r\n      const textArea = document.createElement(\"textarea\");\r\n      textArea.value = text;\r\n      document.body.appendChild(textArea);\r\n      textArea.select();\r\n      try {\r\n        document.execCommand('copy');\r\n        setCopied(true);\r\n      } catch (e) {\r\n        console.error(\"Legacy copy failed\", e);\r\n      }\r\n      document.body.removeChild(textArea);\r\n    }\r\n  };\r\n\r\n  const clearAll = () => {\r\n    setVersions([]);\r\n    setActiveVersionIdx(-1);\r\n    setActiveRewriteTool(null);\r\n    setCopied(false);\r\n    setFormData({ ...formData, keyPoints: \"\", subject: \"\", recipient: \"\" });\r\n  };\r\n\r\n  const renderEmailPreview = (fullContent: string) => {\r\n    const { subject, body } = extractSubjectAndBody(fullContent);\r\n    const paragraphs = body.split(/\\n\\n+/);\r\n\r\n    return (\r\n      <div className=\"flex flex-col h-full bg-[#0F172A] rounded-lg overflow-hidden border border-slate-700/50 shadow-sm\">\r\n        {subject && (\r\n          <div className=\"px-8 py-5 border-b border-slate-700/50 bg-slate-800/20 flex justify-between items-center\">\r\n            <div>\r\n              <span className=\"text-[10px] uppercase tracking-widest text-slate-500 font-bold block mb-1\">Subject Line</span>\r\n              <h2 className=\"text-[15px] font-medium text-slate-100\">{subject}</h2>\r\n            </div>\r\n            <button \r\n              onClick={() => copyText(subject)}\r\n              className=\"text-[10px] font-bold text-slate-500 hover:text-[#00C26D] uppercase tracking-wider transition-colors\"\r\n            >\r\n              Copy\r\n            </button>\r\n          </div>\r\n        )}\r\n        <div className=\"p-8 flex-1 overflow-y-auto custom-scrollbar\">\r\n          <div className=\"space-y-6 text-[15px] leading-7 text-slate-300 font-light\">\r\n            {paragraphs.map((p, i) => {\r\n              const isOpening = i === 0;\r\n              const isCTA = (i === paragraphs.length - 1 && paragraphs.length > 1) || p.includes(\"Best regards\") || p.includes(\"Sincerely\") || p.includes(\"Cheers\");\r\n              const isWatermark = p.includes(\"Generated with SoloBot\");\r\n\r\n              if (isWatermark) {\r\n                 return <p key={i} className=\"text-[10px] text-slate-600 italic mt-8 border-t border-slate-800 pt-4\">{p}</p>;\r\n              }\r\n              if (isOpening) {\r\n                return <p key={i} className=\"text-slate-100 font-medium\">{p}</p>;\r\n              }\r\n              if (isCTA) {\r\n                return (\r\n                  <div key={i} className=\"pl-4 border-l-2 border-[#00C26D]/40\">\r\n                    <p className=\"text-[#00C26D] font-medium whitespace-pre-wrap\">{p}</p>\r\n                  </div>\r\n                );\r\n              }\r\n              return <p key={i}>{p}</p>;\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full w-full bg-[#0B1120] text-slate-200 font-sans selection:bg-[#00C26D]/30 selection:text-white overflow-hidden flex flex-col\">\r\n      <UpgradeModal isOpen={isUpgradeOpen} onClose={() => setIsUpgradeOpen(false)} />\r\n\r\n      <header className=\"flex justify-between items-center px-6 py-4 border-b border-zinc-800 bg-[#0B1120] shrink-0\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"p-2 rounded-xl bg-[#1E293B] border border-slate-700/50 shadow-lg shadow-green-900/10\">\r\n            <Bot className=\"w-5 h-5 text-[#00C26D]\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-xl font-bold text-white tracking-tight flex items-center gap-2\">\r\n              Email Assistant\r\n              <span className=\"px-2 py-0.5 rounded-full bg-[#00C26D]/10 text-[#00C26D] text-[10px] font-bold tracking-wide uppercase border border-[#00C26D]/20\">Premium</span>\r\n            </h1>\r\n            <p className=\"text-xs text-slate-400 font-medium\">Professional communication engine</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-4\">\r\n           {/* Plan Badge */}\r\n           <div className={`px-3 py-1 rounded-full border text-[10px] font-bold uppercase tracking-widest ${userPlan === 'free' ? 'bg-slate-800 border-slate-600 text-slate-400' : 'bg-[#00C26D]/10 border-[#00C26D] text-[#00C26D]'}`}>\r\n              {userPlan === 'free' ? 'Free Plan' : userPlan.replace('_', ' ')}\r\n           </div>\r\n\r\n           <button \r\n            onClick={() => {\r\n                if (!PLAN_LIMITS[userPlan].versions) setIsUpgradeOpen(true);\r\n                else setShowHistory(!showHistory);\r\n            }}\r\n            className={`p-2.5 rounded-lg border transition-all duration-300 ${\r\n              showHistory \r\n                ? 'bg-[#00C26D]/10 border-[#00C26D] text-[#00C26D]' \r\n                : 'bg-[#1E293B] border-slate-700 text-slate-400 hover:text-white'\r\n            }`}\r\n          >\r\n            {(!PLAN_LIMITS[userPlan].versions) ? <Lock className=\"w-4 h-4\" /> : <History className=\"w-4 h-4\" />}\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"flex-1 flex overflow-hidden p-6 gap-6\">\r\n        <div className=\"w-[380px] shrink-0 flex flex-col gap-4 overflow-hidden\">\r\n            <div className=\"flex-1 overflow-y-auto pr-2 space-y-4 scrollbar-thin scrollbar-thumb-zinc-700\">\r\n                \r\n                <div className=\"bg-[#1E293B] border border-slate-700/50 rounded-xl p-5 shadow-lg\">\r\n                  <div className=\"flex items-center gap-2 mb-4\">\r\n                    <Sparkles className=\"w-3.5 h-3.5 text-[#00C26D]\" />\r\n                    <span className=\"text-[11px] font-bold text-slate-200 uppercase tracking-wide\">Context Engine</span>\r\n                  </div>\r\n                  <div className=\"space-y-4\">\r\n                    <Input \r\n                      label=\"Recipient\" \r\n                      placeholder=\"e.g. Elon Musk\" \r\n                      helperText=\"Target audience\"\r\n                      value={formData.recipient} \r\n                      onChange={(v: string) => handleInputChange(\"recipient\", v)} \r\n                    />\r\n                    <Input \r\n                      label=\"Subject Intent\" \r\n                      placeholder=\"e.g. Partnership Proposal\" \r\n                      helperText=\"Core topic\"\r\n                      value={formData.subject} \r\n                      onChange={(v: string) => handleInputChange(\"subject\", v)} \r\n                    />\r\n                    <div>\r\n                      <div className=\"flex justify-between items-baseline mb-1.5 ml-1\">\r\n                        <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider\">Key Points</label>\r\n                        <span className=\"text-[10px] text-slate-500\">Inputs guide generation</span>\r\n                      </div>\r\n                      <textarea\r\n                        value={formData.keyPoints}\r\n                        onChange={(e) => handleInputChange(\"keyPoints\", e.target.value)}\r\n                        className=\"w-full bg-[#0F172A] border border-slate-700 rounded-lg p-3 text-[13px] text-slate-200 h-32 resize-none focus:border-[#00C26D]/50 focus:ring-1 focus:ring-[#00C26D]/50 outline-none placeholder-slate-600 transition-all leading-relaxed\"\r\n                        placeholder=\"- Met at the conference&#10;- Discussed Q4 roadmap&#10;- Want to schedule a demo\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-[#1E293B] border border-slate-700/50 rounded-xl p-5 shadow-lg\">\r\n                   <div className=\"flex items-center gap-2 mb-4\">\r\n                    <Feather className=\"w-3.5 h-3.5 text-[#00C26D]\" />\r\n                    <span className=\"text-[11px] font-bold text-slate-200 uppercase tracking-wide\">Personality & Tone</span>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                    {TONES.map((t) => (\r\n                      <button\r\n                        key={t.id}\r\n                        onClick={() => handleInputChange(\"tone\", t.id)}\r\n                        className={`flex flex-col items-center justify-center p-3 rounded-lg border transition-all ${\r\n                          formData.tone === t.id\r\n                            ? `bg-[#00C26D]/10 border-[#00C26D]`\r\n                            : \"bg-transparent border-slate-700 hover:bg-slate-700/50 opacity-70 hover:opacity-100\"\r\n                        }`}\r\n                      >\r\n                        <t.icon className={`w-4 h-4 mb-1 ${formData.tone === t.id ? 'text-[#00C26D]' : 'text-slate-400'}`} />\r\n                        <span className={`text-[11px] font-medium ${formData.tone === t.id ? 'text-white' : 'text-slate-400'}`}>{t.id}</span>\r\n                        <span className=\"text-[9px] text-slate-500\">{t.label}</span>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"space-y-4\">\r\n                    <Select label=\"Voice\" value={formData.style} options={VOICE_OPTIONS} onChange={(v: string) => handleInputChange(\"style\", v)} />\r\n                    <Select label=\"Length\" value={formData.length} options={LENGTH_OPTIONS} onChange={(v: string) => handleInputChange(\"length\", v)} />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-[#1E293B] border border-slate-700/50 rounded-xl p-4 shadow-lg\">\r\n                   <div onClick={() => setIsRefinementsOpen(!isRefinementsOpen)} className=\"flex items-center justify-between cursor-pointer group\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Sliders className=\"w-3.5 h-3.5 text-[#00C26D]\" />\r\n                        <span className=\"text-[11px] font-bold text-slate-200 uppercase tracking-wide\">Advanced Tuning</span>\r\n                      </div>\r\n                      <ChevronDown className={`w-3.5 h-3.5 text-slate-500 transition-transform ${isRefinementsOpen ? 'rotate-180' : ''}`} />\r\n                   </div>\r\n                   <AnimatePresence>\r\n                     {isRefinementsOpen && (\r\n                       <motion.div\r\n                         initial={{ height: 0, opacity: 0, marginTop: 0 }}\r\n                         animate={{ height: \"auto\", opacity: 1, marginTop: 16 }}\r\n                         exit={{ height: 0, opacity: 0, marginTop: 0 }}\r\n                         className=\"overflow-hidden grid grid-cols-1 gap-2\"\r\n                       >\r\n                          {Object.entries(formData.options).map(([key, val]) => (\r\n                            <Toggle key={key} label={key.replace(/([A-Z])/g, ' $1').trim()} checked={val} onChange={() => handleOptionToggle(key as keyof typeof formData.options)} />\r\n                          ))}\r\n                       </motion.div>\r\n                     )}\r\n                   </AnimatePresence>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"pt-2\">\r\n              <button\r\n                onClick={handleGenerate}\r\n                disabled={!formData.keyPoints}\r\n                className=\"w-full rounded-xl bg-[#00C26D] p-4 text-white font-bold shadow-lg shadow-green-500/20 transition-all hover:bg-[#009e59] hover:scale-[1.01] active:scale-[0.99] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2.5 relative overflow-hidden group\"\r\n              >\r\n                <div className=\"relative z-10 flex items-center gap-2\">\r\n                  <Sparkles className=\"w-4 h-4\" />\r\n                  <span className=\"text-sm tracking-wide\">{versions.length > 0 ? \"Generate Alternative\" : \"Generate Draft\"}</span>\r\n                </div>\r\n                <div className=\"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300\" />\r\n              </button>\r\n              \r\n              {/* Usage Indicator for Free Plan */}\r\n              {userPlan === 'free' && (\r\n                 <div className=\"mt-3 flex items-center justify-between px-2\">\r\n                    <span className=\"text-[10px] text-slate-500\">Daily Free Limit</span>\r\n                    <span className=\"text-[10px] font-bold text-slate-400\">{dailyUsage} / {PLAN_LIMITS.free.draftsPerDay}</span>\r\n                 </div>\r\n              )}\r\n            </div>\r\n        </div>\r\n\r\n        <div className={`flex-1 transition-all duration-500 ease-out flex gap-6 min-w-0 ${showHistory ? 'mr-[320px]' : ''}`}>\r\n          <div className=\"flex-1 bg-[#1E293B] border border-slate-700/50 rounded-2xl shadow-xl flex flex-col overflow-hidden relative\">\r\n            <div className=\"bg-[#0F172A] px-5 py-3 flex items-center justify-between border-b border-slate-700/50 shrink-0\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"flex gap-1.5\">\r\n                  <div className=\"w-2.5 h-2.5 rounded-full bg-[#FF5F57]\" />\r\n                  <div className=\"w-2.5 h-2.5 rounded-full bg-[#FEBC2E]\" />\r\n                  <div className=\"w-2.5 h-2.5 rounded-full bg-[#28C840]\" />\r\n                </div>\r\n                <div className=\"w-px h-4 bg-slate-700 mx-1\" />\r\n                <div className=\"flex items-center gap-2 text-[11px] font-bold text-slate-400 uppercase tracking-widest\">\r\n                  <PenTool className=\"w-3.5 h-3.5\" /> Composer\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                {activeVersionIdx !== -1 && (\r\n                   <span className=\"flex items-center gap-1.5 px-2 py-1 rounded bg-[#00C26D]/10 border border-[#00C26D]/20\">\r\n                      <ThumbsUp className=\"w-3 h-3 text-[#00C26D]\" />\r\n                      <span className=\"text-[10px] font-bold text-[#00C26D] uppercase\">High Confidence</span>\r\n                   </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {versions.length > 0 && (\r\n                <div className=\"bg-[#0F172A] border-b border-slate-700/50 px-2 flex items-center gap-1 overflow-x-auto no-scrollbar shrink-0 max-w-full\">\r\n                  {versions.map((v, idx) => (\r\n                    <button\r\n                      key={v.id}\r\n                      onClick={() => setActiveVersionIdx(idx)}\r\n                      className={`px-4 py-3 text-[11px] font-bold transition-all border-b-2 flex items-center gap-2 whitespace-nowrap ${\r\n                        activeVersionIdx === idx\r\n                          ? \"border-[#00C26D] text-white bg-slate-800\"\r\n                          : \"border-transparent text-slate-500 hover:text-slate-300\"\r\n                      }`}\r\n                    >\r\n                      <span>{v.label}</span>\r\n                      {v.type === 'Original' && <span className=\"px-1 py-0.5 rounded bg-indigo-500/20 text-indigo-400 text-[9px]\">V1</span>}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex-1 p-8 bg-transparent overflow-y-auto custom-scrollbar relative\">\r\n              {activeVersionIdx !== -1 ? (\r\n                 <div className=\"h-full flex flex-col max-w-3xl mx-auto w-full\">\r\n                    <div className=\"flex-1\">\r\n                        {renderEmailPreview(versions[activeVersionIdx].content)}\r\n                    </div>\r\n                    <div className=\"mt-6\">\r\n                       <div className=\"flex items-center gap-2 mb-3\">\r\n                         <Wand2 className=\"w-3.5 h-3.5 text-[#00C26D]\" />\r\n                         <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest\">Intelligent Refinement</span>\r\n                         {(!PLAN_LIMITS[userPlan].rewriteModes) && <Lock className=\"w-3 h-3 text-slate-600\" />}\r\n                       </div>\r\n                       <div className=\"flex flex-wrap gap-2.5\">\r\n                          <RewriteButton icon={Minimize2} label=\"Shorten\" desc=\"Clearer & Faster\" onClick={() => handleRewrite(\"Shorten\")} isActive={activeRewriteTool === \"Shorten\"} />\r\n                          <RewriteButton icon={Maximize2} label=\"Expand\" desc=\"Add Context\" onClick={() => handleRewrite(\"Expand\")} isActive={activeRewriteTool === \"Expand\"} />\r\n                          <RewriteButton icon={Briefcase} label=\"Formal\" desc=\"Professional\" onClick={() => handleRewrite(\"Formal\")} isActive={activeRewriteTool === \"Formal\"} />\r\n                          <RewriteButton icon={Zap} label=\"Punchy\" desc=\"High Impact\" onClick={() => handleRewrite(\"Punchy\")} isActive={activeRewriteTool === \"Punchy\"} />\r\n                       </div>\r\n                    </div>\r\n                 </div>\r\n              ) : (\r\n                 <div className=\"h-full flex flex-col items-center justify-center text-slate-500/50 gap-6\">\r\n                    <div className=\"w-24 h-24 rounded-full bg-slate-800/50 flex items-center justify-center border border-slate-700/50\">\r\n                       <Bot className=\"w-10 h-10 opacity-50\" />\r\n                    </div>\r\n                    <div className=\"text-center space-y-1\">\r\n                      <p className=\"text-sm font-medium text-slate-400\">Ready to compose</p>\r\n                      <p className=\"text-xs text-slate-600\">Configure settings to generate a draft</p>\r\n                    </div>\r\n                 </div>\r\n              )}\r\n            </div>\r\n\r\n            {activeVersionIdx !== -1 && (\r\n               <div className=\"p-4 bg-[#0F172A] border-t border-slate-700/50 flex justify-between items-center shrink-0\">\r\n                  <button onClick={clearAll} className=\"text-xs text-red-400 hover:text-white flex items-center gap-2 px-3 py-2 rounded hover:bg-red-500/20 transition-colors\">\r\n                     <Trash2 className=\"w-3.5 h-3.5\" /> Clear\r\n                  </button>\r\n                  <div className=\"flex gap-3\">\r\n                     <button onClick={handleGenerate} className=\"text-xs text-slate-400 hover:text-white px-3 py-2 rounded hover:bg-slate-800 transition-colors flex items-center gap-2\">\r\n                        <RotateCcw className=\"w-3.5 h-3.5\" /> New Draft\r\n                     </button>\r\n                     <button onClick={() => copyText(versions[activeVersionIdx].content)} className=\"px-4 py-2 bg-[#00C26D] hover:bg-[#009e59] text-white font-bold rounded-lg text-xs flex items-center gap-2 transition-transform active:scale-95 shadow-lg shadow-green-900/20\">\r\n                        {copied ? <Check className=\"w-3.5 h-3.5\" /> : <Copy className=\"w-3.5 h-3.5\" />}\r\n                        {copied ? \"Copied\" : \"Copy All\"}\r\n                     </button>\r\n                  </div>\r\n               </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <AnimatePresence>\r\n          {showHistory && (\r\n            <motion.div \r\n              initial={{ x: \"100%\" }}\r\n              animate={{ x: 0 }}\r\n              exit={{ x: \"100%\" }}\r\n              transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\r\n              className=\"absolute right-0 top-0 bottom-0 w-[320px] bg-[#1E293B] border-l border-slate-700/50 shadow-2xl z-50 flex flex-col\"\r\n            >\r\n               <div className=\"p-5 border-b border-slate-700/50 flex justify-between items-center bg-[#0F172A]\">\r\n                  <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2\">\r\n                     <History className=\"w-3.5 h-3.5 text-[#00C26D]\" /> Version History\r\n                  </h3>\r\n                  <button onClick={() => setShowHistory(false)}><X className=\"w-4 h-4 text-slate-500 hover:text-white\" /></button>\r\n               </div>\r\n               <div className=\"flex-1 overflow-y-auto p-4 space-y-3 scrollbar-thin scrollbar-thumb-zinc-700\">\r\n                  {historyList.map((item, i) => (\r\n                     <div key={item.id} onClick={() => handleHistorySelect(item)} className=\"p-4 bg-slate-800/50 border border-slate-700/50 rounded-lg cursor-pointer hover:border-[#00C26D]/50 hover:bg-slate-800 transition-all group\">\r\n                        <div className=\"flex justify-between mb-2\">\r\n                           <span className=\"text-[10px] font-bold text-[#00C26D] bg-[#00C26D]/10 px-2 py-0.5 rounded\">{item.label}</span>\r\n                           <span className=\"text-[10px] text-slate-500\">{item.timestamp.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span>\r\n                        </div>\r\n                        <p className=\"text-xs text-slate-400 line-clamp-2 group-hover:text-slate-300 transition-colors\">\r\n                          {extractSubjectAndBody(item.content).body}\r\n                        </p>\r\n                     </div>\r\n                  ))}\r\n               </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// --- Sub-Components ---\r\n\r\nconst Input = ({ label, value, onChange, placeholder, helperText }: any) => (\r\n  <div className=\"group\">\r\n    <div className=\"flex justify-between items-baseline mb-1.5 ml-1\">\r\n      <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider\">{label}</label>\r\n      {helperText && <span className=\"text-[9px] text-slate-500 opacity-0 group-hover:opacity-100 transition-opacity\">{helperText}</span>}\r\n    </div>\r\n    <input\r\n      type=\"text\"\r\n      value={value}\r\n      onChange={(e) => onChange(e.target.value)}\r\n      className=\"w-full bg-[#0F172A] border border-slate-700 rounded-lg px-3 py-2.5 text-[13px] text-slate-200 focus:border-[#00C26D]/50 focus:ring-1 focus:ring-[#00C26D]/50 outline-none transition-all placeholder-slate-600\"\r\n      placeholder={placeholder}\r\n    />\r\n  </div>\r\n);\r\n\r\nconst Select = ({ label, value, options, onChange }: any) => (\r\n  <div className=\"group\">\r\n    <label className=\"block text-[10px] font-bold text-slate-400 uppercase mb-1.5 ml-1 tracking-wider\">{label}</label>\r\n    <select\r\n      value={value}\r\n      onChange={(e) => onChange(e.target.value)}\r\n      className=\"w-full bg-[#0F172A] border border-slate-700 rounded-lg px-3 py-2.5 text-[13px] text-slate-200 focus:border-[#00C26D]/50 outline-none appearance-none cursor-pointer\"\r\n    >\r\n      {options.map((o: any) => <option key={o.value} value={o.value}>{o.label}</option>)}\r\n    </select>\r\n  </div>\r\n);\r\n\r\nconst Toggle = ({ label, checked, onChange }: any) => (\r\n  <div onClick={onChange} className={`flex items-center justify-between p-2 rounded-lg cursor-pointer border transition-all ${checked ? 'bg-[#00C26D]/5 border-[#00C26D]/30' : 'bg-transparent border-transparent hover:bg-slate-800'}`}>\r\n    <span className={`text-[11px] font-medium ${checked ? 'text-white' : 'text-slate-400'}`}>{label}</span>\r\n    <div className={`w-7 h-4 rounded-full relative transition-colors ${checked ? 'bg-[#00C26D]' : 'bg-slate-700'}`}>\r\n      <div className={`absolute top-[2px] w-3 h-3 bg-white rounded-full transition-all ${checked ? 'left-[14px]' : 'left-[2px]'}`} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst RewriteButton = ({ icon: Icon, label, desc, onClick, disabled, isActive }: any) => (\r\n  <button \r\n    onClick={onClick} \r\n    disabled={disabled} \r\n    className={`flex items-center gap-2 px-3 py-2 rounded-lg transition-all border group ${isActive ? \"bg-[#00C26D]/10 border-[#00C26D] text-[#00C26D]\" : \"bg-slate-800 border-slate-700 text-slate-400 hover:text-white hover:bg-slate-700\"}`}\r\n  >\r\n    <Icon className={`w-3.5 h-3.5 ${isActive ? \"text-[#00C26D]\" : \"text-slate-500 group-hover:text-white\"}`} />\r\n    <div className=\"flex flex-col items-start\">\r\n      <span className=\"text-[10px] font-bold leading-none\">{label}</span>\r\n      <span className=\"text-[9px] opacity-60 leading-none mt-0.5\">{desc}</span>\r\n    </div>\r\n  </button>\r\n);"],"names":[],"mappings":"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"}}]
}